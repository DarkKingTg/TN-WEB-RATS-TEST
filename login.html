<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login — TN WEB RATS</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#0B0C10;--dark:#1F2833;--gray:#C5C6C7;--cyan:#66FCF1;--teal:#45A29E;--danger:#ff4d6d;--mono:'Share Tech Mono',monospace;--sans:'Rajdhani',sans-serif;}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);font-family:var(--sans);color:var(--gray);min-height:100vh;display:flex;align-items:center;justify-content:center;cursor:none;overflow:hidden;}
canvas{position:fixed;inset:0;z-index:0;cursor:none;}
.scanlines{position:fixed;inset:0;z-index:1;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.03) 2px,rgba(0,0,0,0.03) 4px);pointer-events:none;}
#cursor{position:fixed;pointer-events:none;z-index:9999;top:0;left:0;transform:translate(-50%,-50%);}

.login-wrap{position:relative;z-index:10;width:100%;max-width:440px;padding:20px;}

.brand-row{text-align:center;margin-bottom:40px;animation:fadeDown .6s ease both;}
.brand-row img{width:52px;height:52px;border-radius:50%;border:2px solid var(--cyan);box-shadow:0 0 20px rgba(102,252,241,.3);margin-bottom:14px;}
.brand-row .name{font-family:var(--mono);font-size:.85rem;color:var(--cyan);letter-spacing:.2em;text-transform:uppercase;}
.brand-row .sub{font-size:.65rem;font-family:var(--mono);color:rgba(197,198,199,.35);letter-spacing:.18em;text-transform:uppercase;margin-top:4px;}

.login-card{background:rgba(31,40,51,.92);backdrop-filter:blur(18px);border:1px solid rgba(102,252,241,.12);border-radius:18px;padding:38px 36px;animation:fadeUp .7s .1s ease both;}
@media(max-width:480px){.login-card{padding:28px 22px;}}

.card-header-row{margin-bottom:28px;}
.card-header-row h2{font-size:1.45rem;font-weight:700;color:var(--gray);letter-spacing:.06em;}
.card-header-row h2 span{color:var(--cyan);}
.card-header-row p{font-family:var(--mono);font-size:.66rem;color:rgba(197,198,199,.38);letter-spacing:.12em;margin-top:5px;}

.field-group{margin-bottom:20px;}
.field-label{display:block;font-family:var(--mono);font-size:.63rem;letter-spacing:.2em;text-transform:uppercase;color:rgba(197,198,199,.4);margin-bottom:7px;transition:color .3s;}
.field-group:focus-within .field-label{color:var(--cyan);}
.field-wrap{position:relative;}
.field-icon{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:rgba(102,252,241,.28);font-size:.85rem;pointer-events:none;transition:color .3s;}
.field-group:focus-within .field-icon{color:var(--cyan);}
.f-ctrl{width:100%;padding:13px 14px 13px 42px;background:rgba(11,12,16,.75);border:1px solid rgba(102,252,241,.12);border-radius:10px;color:var(--gray);font-family:var(--sans);font-size:.95rem;font-weight:500;transition:border-color .3s,box-shadow .3s;outline:none;-webkit-appearance:none;}
.f-ctrl::placeholder{color:rgba(197,198,199,.18);}
.f-ctrl:focus{border-color:var(--cyan);box-shadow:0 0 0 3px rgba(102,252,241,.08);background:rgba(11,12,16,.92);}
.f-ctrl.is-invalid{border-color:var(--danger);}
.pw-toggle{position:absolute;right:13px;top:50%;transform:translateY(-50%);background:none;border:none;color:rgba(197,198,199,.28);cursor:pointer;padding:4px;transition:color .2s;font-size:.85rem;}
.pw-toggle:hover{color:var(--cyan);}

.role-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:22px;}
.role-opt{padding:11px 10px;background:rgba(11,12,16,.7);border:1px solid rgba(102,252,241,.12);border-radius:9px;color:rgba(197,198,199,.45);font-family:var(--sans);font-size:.8rem;font-weight:600;letter-spacing:.05em;cursor:pointer;text-align:center;transition:all .25s;}
.role-opt:hover{border-color:rgba(102,252,241,.3);color:var(--gray);}
.role-opt.active{border-color:var(--cyan);background:rgba(102,252,241,.07);color:var(--cyan);}
.role-opt i{display:block;font-size:.95rem;margin-bottom:4px;}

.alert-box{padding:12px 16px;border-radius:9px;font-family:var(--mono);font-size:.7rem;letter-spacing:.08em;margin-bottom:18px;display:none;}
.alert-box.error{background:rgba(255,77,109,.08);border:1px solid rgba(255,77,109,.3);color:var(--danger);}
.alert-box.show{display:block;}

.btn-login{width:100%;padding:14px;background:linear-gradient(90deg,var(--teal),var(--cyan));border:none;border-radius:10px;color:var(--bg);font-family:var(--sans);font-size:1rem;font-weight:700;letter-spacing:.12em;text-transform:uppercase;cursor:pointer;position:relative;overflow:hidden;transition:transform .2s,box-shadow .3s;}
.btn-login::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.18),transparent);transform:translateX(-100%);transition:transform .5s;}
.btn-login:hover{transform:translateY(-2px);box-shadow:0 8px 26px rgba(102,252,241,.32);}
.btn-login:hover::before{transform:translateX(100%);}
.btn-login.loading{pointer-events:none;opacity:.8;}
.btn-login.loading .btn-text{display:none;}
.btn-login .btn-loader{display:none;}
.btn-login.loading .btn-loader{display:inline-flex;align-items:center;gap:8px;}
@keyframes spin{to{transform:rotate(360deg);}}
.spin{animation:spin .7s linear infinite;}

.footer-links{text-align:center;margin-top:22px;font-family:var(--mono);font-size:.65rem;color:rgba(197,198,199,.3);letter-spacing:.08em;animation:fadeUp .7s .2s ease both;}
.footer-links a{color:var(--cyan);text-decoration:none;transition:opacity .2s;}
.footer-links a:hover{opacity:.7;}

@keyframes fadeDown{from{opacity:0;transform:translateY(-16px);}to{opacity:1;transform:translateY(0);}}
@keyframes fadeUp  {from{opacity:0;transform:translateY(16px);}to{opacity:1;transform:translateY(0);}}
</style>

<style>
.neural-background-iframe {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    border: none;
    z-index: 0;
    pointer-events: none;
}
</style>

</head>
<body>
    <iframe src="neural-bg.html" class="neural-background-iframe"></iframe>

<div class="scanlines"></div>
<svg id="cursor" width="28" height="28" viewBox="0 0 28 28">
  <circle cx="14" cy="14" r="9" fill="none" stroke="rgba(102,252,241,0.65)" stroke-width="1.2"/>
  <circle cx="14" cy="14" r="2" fill="rgba(102,252,241,0.9)"/>
  <line x1="7" y1="14" x2="4" y2="14" stroke="rgba(102,252,241,0.4)" stroke-width="0.8"/>
  <line x1="21" y1="14" x2="24" y2="14" stroke="rgba(102,252,241,0.4)" stroke-width="0.8"/>
  <line x1="14" y1="7" x2="14" y2="4" stroke="rgba(102,252,241,0.4)" stroke-width="0.8"/>
  <line x1="14" y1="21" x2="14" y2="24" stroke="rgba(102,252,241,0.4)" stroke-width="0.8"/>
</svg>

<div class="login-wrap">
  <div class="brand-row">
    <img src="RATTY.png" alt="TN WEB RATS" onerror="this.style.display='none'">
    <div class="name">TN WEB RATS</div>
    <div class="sub"> admin portal</div>
  </div>

  <div class="login-card">
    <div class="card-header-row">
      <h2>Admin <span>Login</span></h2>
      <p>restricted access · credentials required</p>
    </div>

    <div class="alert-box error" id="alertBox">invalid email or password</div>

    <div class="field-group">
      <label class="field-label">Email</label>
      <div class="field-wrap">
        <i class="fas fa-envelope field-icon"></i>
        <input class="f-ctrl" type="email" id="loginEmail" placeholder="admin@tnwebrats.com" autocomplete="email">
      </div>
    </div>

    <div class="field-group">
      <label class="field-label">Password</label>
      <div class="field-wrap">
        <i class="fas fa-lock field-icon"></i>
        <input class="f-ctrl" type="password" id="loginPass" placeholder="••••••••" autocomplete="current-password">
        <button class="pw-toggle" id="togglePw" type="button"><i class="fas fa-eye"></i></button>
      </div>
    </div>

    <button class="btn-login" id="loginBtn" type="button">
      <span class="btn-text"><i class="fas fa-shield-halved me-2"></i>Sign In</span>
      <span class="btn-loader"><i class="fas fa-circle-notch spin"></i>&nbsp;Authenticating...</span>
    </button>
  </div>

  <div class="footer-links">
    <a href="signup.html">Register new admin</a> &nbsp;·&nbsp; <a href="index.html">← Back to site</a>
  </div>
</div>

<script>
// ── Cursor ───────────────────────────────────
const cursorEl=document.getElementById('cursor');
document.addEventListener('mousemove',e=>{cursorEl.style.left=e.clientX+'px';cursorEl.style.top=e.clientY+'px';});

// ── Password toggle ───────────────────────────
document.getElementById('togglePw').addEventListener('click',function(){
  const inp=document.getElementById('loginPass'),icon=this.querySelector('i');
  inp.type=inp.type==='password'?'text':'password';
  icon.className=inp.type==='password'?'fas fa-eye':'fas fa-eye-slash';
});

// ── Auth ──────────────────────────────────────
document.getElementById('loginBtn').addEventListener('click',function(){
  const email=document.getElementById('loginEmail').value.trim().toLowerCase();
  const pass =document.getElementById('loginPass').value;
  const alert=document.getElementById('alertBox');
  alert.classList.remove('show');

  if(!email||!pass){alert.textContent='// email and password are required';alert.classList.add('show');return;}

  this.classList.add('loading');

  setTimeout(()=>{
    // Always ensure the default superadmin exists
    const DEFAULT_EMAIL = 'admin@tnwebrats.com';
    const DEFAULT_PASS  = 'admin123';
    const admins = JSON.parse(localStorage.getItem('tnwr_admins') || '[]');
    if (!admins.find(a => a.email === DEFAULT_EMAIL)) {
      admins.push({name:'Super Admin', email:DEFAULT_EMAIL, password:btoa(DEFAULT_PASS), role:'superadmin', id:'ADM001', createdAt:new Date().toISOString()});
      localStorage.setItem('tnwr_admins', JSON.stringify(admins));
    }

    // Check stored admins OR hardcoded fallback
    const isDefault = (email === DEFAULT_EMAIL && pass === DEFAULT_PASS);
    const user = admins.find(a => a.email === email && a.password === btoa(pass));

    if (user || isDefault) {
      const s = user || admins.find(a => a.email === DEFAULT_EMAIL) || {name:'Super Admin', email:DEFAULT_EMAIL, role:'superadmin'};
      sessionStorage.setItem('tnwr_session', JSON.stringify({...s, password:undefined, loginAt:new Date().toISOString()}));
      window.location.href = 'admin-dashboard.html';
    } else {
      this.classList.remove('loading');
      document.getElementById('loginEmail').classList.add('is-invalid');
      document.getElementById('loginPass').classList.add('is-invalid');
      alert.textContent = 'invalid email or password';
      alert.classList.add('show');
    }
  },900);
});

// Enter key
document.addEventListener('keydown',e=>{if(e.key==='Enter')document.getElementById('loginBtn').click();});
['loginEmail','loginPass'].forEach(id=>{document.getElementById(id).addEventListener('input',function(){this.classList.remove('is-invalid');document.getElementById('alertBox').classList.remove('show');});});

// ── Neural BG ─────────────────────────────────
(function(){
  const CFG={count:55,dist:220,fov:480,speed:.42,drag:.967,depth:600,turb:.013,light:{x:.62,y:-.38}};
  
  let W,H,cx,cy,rotX=.18,rotY=0,zoom=1.5,frame=0,lastMF=-9999;
  const mS={x:0,y:0},m3={x:0,y:0,z:0,active:false},cur={x:0,y:0};
  let pts=[],pA;
  function resize(){W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;cx=W/2;cy=H/2;mS.x=cx;mS.y=cy;if(!pts.length){pts=Array.from({length:CFG.count},()=>new P());pA=new Float32Array(CFG.count*CFG.count);}}
  window.addEventListener('resize',resize);resize();
  class P{constructor(){this.x=(Math.random()-.5)*W*2.2;this.y=(Math.random()-.5)*H*2.2;this.z=(Math.random()-.5)*CFG.depth*3;this.vx=(Math.random()-.5)*CFG.speed;this.vy=(Math.random()-.5)*CFG.speed;this.vz=(Math.random()-.5)*CFG.speed*.6;this._t();this.rt=Math.random()*180;this.sz=1.4+Math.random()*2;this.ph=Math.random()*Math.PI*2;this.ps=.015+Math.random()*.025;}
  _t(){this.tx=(Math.random()-.5)*W*1.8;this.ty=(Math.random()-.5)*H*1.8;this.tz=(Math.random()-.5)*CFG.depth*2.5;this.rt=120+Math.random()*200;}
  update(){if(--this.rt<=0)this._t();this.vx+=(this.tx-this.x)*.00007;this.vy+=(this.ty-this.y)*.00007;this.vz+=(this.tz-this.z)*.00005;this.vx+=(Math.random()-.5)*CFG.turb;this.vy+=(Math.random()-.5)*CFG.turb;this.vz+=(Math.random()-.5)*CFG.turb*.5;this.vx*=CFG.drag;this.vy*=CFG.drag;this.vz*=CFG.drag;const sp=Math.sqrt(this.vx*this.vx+this.vy*this.vy+this.vz*this.vz),mx=CFG.speed*3;if(sp>mx){const r=mx/sp;this.vx*=r;this.vy*=r;this.vz*=r;}this.x+=this.vx;this.y+=this.vy;this.z+=this.vz;this.ph+=this.ps;const bx=W*1.2,by=H*1.2,bz=CFG.depth*1.6;if(this.x>bx)this.x=-bx;if(this.x<-bx)this.x=bx;if(this.y>by)this.y=-by;if(this.y<-by)this.y=by;if(this.z>bz)this.z=-bz;if(this.z<-bz)this.z=bz;}
  project(){const cY=Math.cos(rotY),sY=Math.sin(rotY);let rx=this.x*cY-this.z*sY,rz=this.x*sY+this.z*cY;const cX=Math.cos(rotX),sX=Math.sin(rotX);let ry=this.y*cX-rz*sX,fz=this.y*sX+rz*cX;const fov=CFG.fov*zoom,p=fov+fz+CFG.depth,sc=p>1?fov/p:.001;return{sx:cx+rx*sc,sy:cy+ry*sc,scale:sc,fz};}}
  function lf(sx,sy){const dx=(sx/W-.5)-CFG.light.x,dy=(sy/H-.5)-CFG.light.y;return Math.max(.18,1-Math.sqrt(dx*dx+dy*dy)*1.25);}
  function d3(a,b){const dx=a.x-b.x,dy=a.y-b.y,dz=a.z-b.z;return Math.sqrt(dx*dx+dy*dy+dz*dz);}
  function drawOrb(p,pj){const l=lf(pj.sx,pj.sy),r=pj.scale*p.sz*2.2*(0.72+0.28*Math.sin(p.ph)),a=Math.min(1,pj.scale*2.1)*l;if(a<.02||r<.3)return;const h=ctx.createRadialGradient(pj.sx,pj.sy,0,pj.sx,pj.sy,r*5);h.addColorStop(0,`rgba(102,252,241,${a*.4})`);h.addColorStop(.45,`rgba(69,162,158,${a*.12})`);h.addColorStop(1,'rgba(69,162,158,0)');ctx.beginPath();ctx.arc(pj.sx,pj.sy,r*5,0,Math.PI*2);ctx.fillStyle=h;ctx.fill();const c=ctx.createRadialGradient(pj.sx-r*.35,pj.sy-r*.35,0,pj.sx,pj.sy,r);c.addColorStop(0,`rgba(235,255,255,${a})`);c.addColorStop(.35,`rgba(102,252,241,${a})`);c.addColorStop(.8,`rgba(69,162,158,${a*.85})`);c.addColorStop(1,`rgba(11,12,16,${a*.35})`);ctx.beginPath();ctx.arc(pj.sx,pj.sy,r,0,Math.PI*2);ctx.fillStyle=c;ctx.fill();}
  function drawConn(pjA,pjB,alpha){if(alpha<.004)return;const fa=alpha*(lf(pjA.sx,pjA.sy)+lf(pjB.sx,pjB.sy))*.5*.9,lw=Math.max(.2,alpha*2*Math.min(pjA.scale,pjB.scale));ctx.beginPath();ctx.moveTo(pjA.sx,pjA.sy);ctx.lineTo(pjB.sx,pjB.sy);ctx.strokeStyle=`rgba(102,252,241,${fa})`;ctx.lineWidth=lw;ctx.lineCap='round';ctx.stroke();}
  window.addEventListener('mousemove',e=>{mS.x=e.clientX;mS.y=e.clientY;cur.x=e.clientX;cur.y=e.clientY;m3.active=true;lastMF=frame;});
  window.addEventListener('mouseleave',()=>{m3.active=false;});
  function loop(){frame++;const idle=frame-lastMF>180;if(idle){rotY+=.00025;rotX+=.0001;}else{rotX+=(.18+(mS.y/H-.5)*.6-rotX)*.013;rotY+=((mS.x/W-.5)*1.2-rotY)*.013;}ctx.fillStyle='#0B0C10';ctx.fillRect(0,0,W,H);const vig=ctx.createRadialGradient(cx,cy,H*.05,cx,cy,H*.92);vig.addColorStop(0,'rgba(0,0,0,0)');vig.addColorStop(1,'rgba(0,0,0,0.72)');ctx.fillStyle=vig;ctx.fillRect(0,0,W,H);pts.forEach(p=>p.update());const PJ=pts.map(p=>p.project());const ord=pts.map((_,i)=>i).sort((a,b)=>PJ[a].fz-PJ[b].fz);for(let ii=0;ii<ord.length-1;ii++){for(let jj=ii+1;jj<ord.length;jj++){const i=ord[ii],j=ord[jj],d=d3(pts[i],pts[j]),key=i*CFG.count+j,tgt=d<CFG.dist?Math.pow(1-d/CFG.dist,1.8):0;pA[key]+=(tgt-pA[key])*(tgt>pA[key]?.10:.038);if(pA[key]>.003)drawConn(PJ[i],PJ[j],pA[key]);}}ord.forEach(i=>drawOrb(pts[i],PJ[i]));requestAnimationFrame(loop);}
  loop();
})();
</script>
</body>
</html>
